{{- /*
  bg-images/private/css-images.html
  Prints css in template below, including relative permalink to original & webp image
  @author @sean-au

  @context dict
    .image
      .selector - css selector
      .lazy - true if lazy load the image
    .resized
      .original - original image format resized to width
      .webp - webp version of image resized to width
  
  @access private

  @example - Hugo Template
  {{ partial "bg-images/private/css-images" (dict "selector" $selector "original" $resized.original "webp" $resized.webp) }}

*/ -}}

{{ if .image.lazy }}

  {{ if eq .image.placeholder "lqip" }}
    {{ .image.selector }} .js {
      background-image: url({{ .resized.lqip }});;
    }
  {{ else }}
    {{ .image.selector }} .js {
      background-image: none;
    }
  {{ end }}
{{ end }}

{{- /*  no js (assumes no webp) support or js script error!
    **  js & no webp support */ -}}
{{ .image.selector }},
.js.no-webp  {{ .image.selector -}}{{- if .image.lazy -}}.bg-loaded {{ end }} {
  background-image: url({{ .resized.original.RelPermalink }});
}
{{- /* js & webp support */ -}}
.js.webp {{ .image.selector -}}{{- if .image.lazy -}}.bg-loaded {{ end }} {
  background-image: url({{ .resized.webp.RelPermalink }});
}

