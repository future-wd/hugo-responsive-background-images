{{- /*
  bg-images/private/print-image-css.html
  Prints image css with breakpoints

  @author @sean-au

  @context slice of dicts: (images) inlcuding:
    .src: image.jpg 
    .selector: .selector
    .widths: [500, 900] 
    .ctx: {image's page context}

  @access private

  @example - Hugo Template
  {{ partial "bg-images/private/print-image-css" $variables.images }}

*/ -}}
{{-  range $image := . }}
  /* Page: {{ $image.ctx.RelPermalink }} */
  {{- range $index, $width := sort $image.widths }}
    {{- $resized := partial "bg-images/private/generate-images" (dict "image" $image "width" $width) }}
    {{- $params := (dict
      "resized" $resized
      "image" $image ) -}}
    {{- if eq $index 0 }}
    {{- /* first width */ -}}
    @media (max-width: {{ $width }}px) {
      {{ partial "bg-images/private/css-images" $params }}
    }
    {{- else if (ne (add $index 1) (len $image.widths)) }}
    {{- /* inter widths */ -}}
    {{- $prev_width := index $image.widths (sub $index 1) -}}
    @media (min-width: {{ add 1 $prev_width }}px) and (max-width: {{ $width }}px) {
      {{ partial "bg-images/private/css-images" $params }}
    }
    {{- else }}
    {{- /* last width */ -}}
    {{- $prev_width := index $image.widths (sub $index 1) -}}
    @media (min-width: {{ add 1 $prev_width }}px) {
      {{ partial "bg-images/private/css-images" $params }}
    }
    {{- end }}
  {{- end }}
{{- end }}
